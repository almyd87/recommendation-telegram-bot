
@bot.message_handler(commands=["admin"])
def admin_login(message):
    if message.from_user.id != ADMIN_ID:
        return
    bot.send_message(message.chat.id, "ğŸ” Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:")
    bot.register_next_step_handler(message, check_admin_pass)

def check_admin_pass(message):
    if message.text == ADMIN_PASSWORD:
        show_admin_panel(message.chat.id)
    else:
        bot.send_message(message.chat.id, "âŒ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©.")

def show_admin_panel(chat_id):
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    markup.add("âœ… ØªÙØ¹ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù…", "ğŸ“œ Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª")
    markup.add("ğŸ’° ØªØºÙŠÙŠØ± Ø§Ù„Ø³Ø¹Ø±", "ğŸ’¼ ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø­ÙØ¸Ø©")
    markup.add("ğŸ“ ØªØºÙŠÙŠØ± Ø§Ù„Ø±Ø³Ø§Ù„Ø©", "ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©")
    markup.add("ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ†", "ğŸ“Š Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ØªÙˆØµÙŠØ§Øª")
    markup.add("ğŸ”“ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬")
    bot.send_message(chat_id, "ğŸ“‹ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø·ÙˆØ±:", reply_markup=markup)

@bot.message_handler(func=lambda m: m.text == "ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ†")
def list_users(message):
    users = load_users()
    for uid, data in users.items():
        bot.send_message(message.chat.id, f"ğŸ‘¤ {data['name']} | {data['email']} | Ø§Ø´ØªØ±Ø§Ùƒ: {'âœ…' if data['subscribed'] else 'âŒ'}")
